<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Will you be my Valentine Andrew Getzow?</title>
    <meta name="description" content="A tiny interactive Valentine page.">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
      /* --- Moving hearts background --- */
      #hearts {
        position: fixed;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 0;
      }
      .heart {
        position: absolute;
        bottom: -40px;
        animation-name: floatUp, sway;
        animation-timing-function: linear, ease-in-out;
        animation-iteration-count: 1, infinite;
        will-change: transform, opacity;
        user-select: none;
        filter: drop-shadow(0 6px 10px rgba(0,0,0,0.08));
      }
      @keyframes floatUp {
        0%   { transform: translateY(0) scale(1); opacity: 0; }
        10%  { opacity: 0.9; }
        100% { transform: translateY(-120vh) scale(1.15); opacity: 0; }
      }
      @keyframes sway {
        0%   { transform: translateX(0); }
        50%  { transform: translateX(18px); }
        100% { transform: translateX(0); }
      }

      /* Keep your card above the hearts */
      .card {
        position: relative;
        z-index: 1;
      }

      /* Smooth button scaling */
      #yesBtn { transition: transform 0.2s ease; }

      /* Nice placeholder if image fails */
      #valImage {
        background: linear-gradient(135deg, rgba(255,192,203,0.25), rgba(173,216,230,0.25));
      }
    </style>
  </head>

  <body class="min-h-screen bg-pink-50 flex items-center justify-center p-6">
    <!-- Moving hearts layer -->
    <div id="hearts" aria-hidden="true"></div>

    <div class="card bg-white rounded-2xl shadow-lg p-6 max-w-md w-full text-center">
      <h1 class="text-2xl font-bold mb-4">Will you be my Valentine Andrew Getzow??? ðŸ’˜</h1>

      <img
        id="valImage"
        class="w-full h-64 object-cover rounded-xl mb-5"
        alt="Valentine gif"
      />

      <div class="flex gap-3 justify-center">
        <button
          id="yesBtn"
          class="px-5 py-3 rounded-xl font-semibold bg-blue-500 text-white hover:bg-blue-600"
          type="button"
        >
          Yes ðŸ’™
        </button>

        <button
          id="noBtn"
          class="px-5 py-3 rounded-xl font-semibold bg-gray-200 hover:bg-gray-300"
          type="button"
        >
          No
        </button>
      </div>

      <p id="hint" class="text-sm text-gray-500 mt-4"></p>
    </div>

    <script>
      // ---------- HEART BACKGROUND ----------
      const heartsLayer = document.getElementById("hearts");

      function spawnHeart() {
        const s = document.createElement("span");
        s.className = "heart";
        s.textContent = Math.random() > 0.25 ? "ðŸ’—" : "ðŸ’–";

        const left = Math.random() * 100; // vw
        const size = 16 + Math.random() * 26; // px
        const dur = 6 + Math.random() * 6; // seconds
        const delay = Math.random() * 1.5; // seconds

        s.style.left = left + "vw";
        s.style.fontSize = size + "px";
        s.style.opacity = (0.35 + Math.random() * 0.45).toFixed(2);
        s.style.animationDuration = `${dur}s, ${1.6 + Math.random() * 1.6}s`;
        s.style.animationDelay = `${delay}s, 0s`;

        heartsLayer.appendChild(s);
        setTimeout(() => s.remove(), (dur + delay) * 1000);
      }

      setInterval(spawnHeart, 220);
      for (let i = 0; i < 12; i++) spawnHeart();

      // ---------- GIF LOADING (GIPHY-FIRST; WORKS LIKE YOUR YES GIF) ----------
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const valImage = document.getElementById("valImage");
      const hint = document.getElementById("hint");

      // If you don't want local files at all, keep these local entries but it's fine if they don't exist;
      // it'll automatically fall back to GIPHY.
      const GIFS = {
        // Start screen GIF (GIPHY)
        start: [
          "start.gif",
          "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif"
        ],

        // After YES click (your working one)
        yes: [
          "yes.gif",
          "https://media.giphy.com/media/sQfnbNwfNcQly/giphy.gif"
        ],

        // Final gif AFTER YES (Eevee)
        yesFinal: [
          "yes-final.gif",
          "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExcnd5OW94bW81Zzg5MXpyMHB6eTE0azRiMGU5OHhlYTl4MmNiMHh6biZlcD12MV9naWZzX3NlYXJjaCZjdD1n/TqK5V0YnrWaR2/200.gif"
        ],

        // NO click gif (GIPHY)
        no: [
          "no.gif",
          "https://media.giphy.com/media/3og0IPxMM0erATueVW/giphy.gif"
        ]
      };

      function setImageFromList(urlList, labelForErrors) {
        let i = 0;

        function tryNext() {
          if (i >= urlList.length) {
            hint.textContent = `Image blocked/not found. (Tried ${labelForErrors})`;
            return;
          }

          const url = urlList[i++];
          const testImg = new Image();
          testImg.onload = () => {
            valImage.src = url;
            hint.textContent = "";
          };
          testImg.onerror = () => tryNext();
          testImg.src = url;
        }

        tryNext();
      }

      // Load starting GIF
      setImageFromList(GIFS.start, "start");

      // Tiny sound
      function playGlueSong() {
        try {
          const ctx = new (window.AudioContext || window.webkitAudioContext)();
          const now = ctx.currentTime;
          const notes = [440, 550, 660, 880];
          const duration = 0.35;
          notes.forEach((freq, idx) => {
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.type = "sine";
            osc.frequency.value = freq;
            gain.gain.setValueAtTime(0, now + idx * duration);
            gain.gain.linearRampToValueAtTime(0.18, now + idx * duration + 0.02);
            gain.gain.linearRampToValueAtTime(0, now + (idx + 1) * duration - 0.05);
            osc.connect(gain).connect(ctx.destination);
            osc.start(now + idx * duration);
            osc.stop(now + (idx + 1) * duration);
          });
          setTimeout(() => ctx.close().catch(() => {}), (notes.length * duration + 0.5) * 1000);
        } catch {}
      }

      let finalTimer = null;

      // YES
      yesBtn.addEventListener("click", () => {
        setImageFromList(GIFS.yes, "yes");

        yesBtn.textContent = "You are now my Valentine FOREVER...er I mean um, for uh 2026! ðŸ’™";
        noBtn.style.display = "none";

        playGlueSong();

        confetti({
          particleCount: 250,
          spread: 80,
          origin: { y: 0.6 }
        });

        hint.textContent = "Yay ðŸ’™";

        // After ~2 seconds, show the final Eevee gif
        if (finalTimer) clearTimeout(finalTimer);
        finalTimer = setTimeout(() => {
          setImageFromList(GIFS.yesFinal, "yesFinal");
        }, 2000);
      });

      // NO
      noBtn.addEventListener("click", () => {
        setImageFromList(GIFS.no, "no");

        noBtn.textContent = "No (Are you sure about that?)";

        yesBtn.classList.add("scale-125");
        setTimeout(() => yesBtn.classList.remove("scale-125"), 300);

        hint.textContent = "ðŸ˜³";
      });
    </script>
  </body>
</html>
