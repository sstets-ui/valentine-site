<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine</title>
  <style>
    :root{
      --bg1:#fff1f5;
      --bg2:#ffe4ee;
      --card:#ffffffcc;
      --text:#1f2937;
      --muted:#6b7280;
      --pink:#fb7185;
      --pink2:#f43f5e;
      --shadow: 0 18px 55px rgba(0,0,0,.12);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, var(--bg2), transparent 60%),
                  radial-gradient(900px 700px at 85% 20%, #ffd0df, transparent 55%),
                  linear-gradient(180deg, var(--bg1), #fff);
      overflow-x:hidden;
    }

    /* Heart background */
    #heartBg{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }
    .heart{
      position:absolute;
      top:-10vh;
      width:14px;height:14px;
      transform: rotate(45deg);
      opacity:.25;
      animation: fall linear forwards;
      filter: drop-shadow(0 2px 8px rgba(244,63,94,.25));
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:14px;height:14px;
      background: rgba(244,63,94,.9);
      border-radius:50%;
    }
    .heart{
      background: rgba(244,63,94,.9);
      border-radius:3px;
    }
    .heart::before{left:-7px; top:0}
    .heart::after{left:0; top:-7px}

    @keyframes fall{
      to{
        transform: translateY(120vh) rotate(45deg);
        opacity:0;
      }
    }

    .wrap{
      position:relative;
      z-index:1;
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px 14px 56px;
    }
    .card{
      width:min(410px, 94vw);
      background: var(--card);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.65);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .top{
      padding:18px 18px 10px;
      text-align:center;
    }
    .date{
      font-weight:800;
      letter-spacing:.03em;
      color:#374151;
      margin-top:8px;
    }
    h1{
      margin:10px 0 0;
      font-size:20px;
      line-height:1.25;
      font-weight:900;
    }
    .img{
      padding:10px 16px 0;
    }
    .img img{
      width:100%;
      border-radius: 18px;
      display:block;
      box-shadow: 0 10px 28px rgba(0,0,0,.10);
      object-fit:cover;
      max-height: 280px;
    }

    .buttons{
      margin:14px 16px 0;
      background: rgba(255,255,255,.7);
      border: 1px solid rgba(255,255,255,.75);
      border-radius: 18px;
      padding:16px;
      display:flex;
      gap:14px;
      justify-content:center;
      align-items:center;
    }
    .pill{
      border:0;
      border-radius:999px;
      padding:12px 18px;
      font-weight:900;
      letter-spacing:.02em;
      cursor:pointer;
      min-width:132px;
      transition: transform .12s ease, opacity .12s ease, filter .12s ease;
    }
    .pill:active{transform:scale(.98)}
    .yes{background: linear-gradient(180deg, #fb7185, #f43f5e); color:white;}
    .no{background: linear-gradient(180deg, #fda4af, #fb7185); color:white;}
    .locked{
      opacity:.55;
      filter: grayscale(.25);
      cursor:not-allowed;
    }

    .hint{
      padding:12px 18px 4px;
      text-align:center;
      font-weight:700;
      color:var(--muted);
      font-size:13px;
    }
    .status{
      padding:0 18px 16px;
      text-align:center;
      font-weight:900;
      color:#374151;
      font-size:13px;
    }

    .boss{
      padding:16px 16px 18px;
      border-top:1px solid rgba(0,0,0,.06);
    }
    .bossHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .bossHead h2{
      margin:0;
      font-size:14px;
      letter-spacing:.02em;
      font-weight:900;
      color:#111827;
    }
    .bossHead button{
      border:0;
      border-radius:999px;
      padding:10px 14px;
      font-weight:900;
      background:#111827;
      color:white;
      cursor:pointer;
    }
    .arena{
      position:relative;
      border-radius:18px;
      overflow:hidden;
      background: radial-gradient(700px 300px at 50% 10%, rgba(244,63,94,.20), transparent 60%),
                  linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.35));
      border:1px solid rgba(0,0,0,.06);
    }
    canvas{display:block; width:100%; height:260px;}
    .overlay{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:18px;
      background: rgba(255,255,255,.70);
      backdrop-filter: blur(8px);
    }
    .overlay.hidden{display:none}
    .overlayBox{
      max-width: 310px;
      padding:16px 16px 14px;
      border-radius:18px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 16px 40px rgba(0,0,0,.12);
    }
    .overlayBox .big{
      font-size:22px;
      font-weight:1000;
      margin:0 0 6px;
    }
    .overlayBox .small{
      margin:0;
      color:var(--muted);
      font-weight:800;
      font-size:13px;
      line-height:1.35;
    }

    .bars{
      display:flex;
      gap:10px;
      margin-top:10px;
    }
    .barWrap{
      flex:1;
      background: rgba(17,24,39,.08);
      border-radius:999px;
      overflow:hidden;
      height:10px;
    }
    .bar{height:100%; width:100%}
    #playerHPBar{background: linear-gradient(90deg,#fb7185,#f43f5e)}
    #bossHPBar{background: linear-gradient(90deg,#60a5fa,#6366f1)}
    #loveBar{background: linear-gradient(90deg,#fda4af,#fb7185)}
    .barLabels{
      display:flex;
      justify-content:space-between;
      margin-top:8px;
      color:var(--muted);
      font-size:11px;
      font-weight:900;
      letter-spacing:.02em;
    }
    .bossMsg{
      margin:10px 0 0;
      text-align:center;
      font-weight:900;
      font-size:13px;
      color:#374151;
    }
  </style>
</head>

<body>
  <div id="heartBg" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card">
      <div class="top">
        <!-- optional little icon -->
        <div style="font-size:34px; line-height:1;">ðŸ’™</div>
        <div class="date" id="dateText">2/14/26</div>
        <h1 id="questionText">Will you be my Valentine, Andrew Getzow?</h1>
      </div>

      <div class="img">
        <!-- swap this src to your Eevee image file if you want -->
        <img id="mainImage" alt="Valentine image" src="https://images.unsplash.com/photo-1546447147-3fc2b8181b69?auto=format&fit=crop&w=1200&q=80">
      </div>

      <div class="buttons">
        <button id="yesBtn" class="pill yes locked" disabled>LOCKED</button>
        <button id="noBtn" class="pill no locked" disabled>LOCKED</button>
      </div>

      <div class="hint" id="hintText">Both buttons are locked ðŸ˜ˆ Beat the boss first.</div>
      <div class="status" id="statusText">Status: Undecided</div>

      <div class="boss" id="bossSection">
        <div class="bossHead">
          <h2>Boss Fight</h2>
          <button id="bossStart">Start</button>
        </div>

        <div class="arena">
          <canvas id="bossCanvas"></canvas>

          <div class="overlay" id="bossOverlay">
            <div class="overlayBox">
              <p class="big">Beat the Boss</p>
              <p class="small">Move: WASD / Arrow Keys (or drag).<br/>Attack: Space (or tap).</p>
            </div>
          </div>
        </div>

        <div class="bars">
          <div class="barWrap"><div class="bar" id="playerHPBar"></div></div>
          <div class="barWrap"><div class="bar" id="bossHPBar"></div></div>
        </div>

        <div class="barLabels">
          <div>YOU</div>
          <div>BOSS</div>
        </div>

        <div class="barWrap" style="margin-top:10px">
          <div class="bar" id="loveBar" style="width:0%"></div>
        </div>
        <div class="barLabels"><div>LOVE METER</div><div id="lovePct">0%</div></div>

        <p class="bossMsg" id="bossMsg">Beat the boss to unlock YES/NO ðŸ’˜</p>
      </div>
    </div>
  </div>

<script>
/* =========================
   HEART BACKGROUND (simple)
========================= */
const heartBg = document.getElementById("heartBg");
function spawnHeart(){
  const h = document.createElement("div");
  h.className = "heart";
  const size = 10 + Math.random()*16;
  h.style.width = size + "px";
  h.style.height = size + "px";
  h.style.left = (Math.random()*100) + "vw";
  h.style.opacity = (0.10 + Math.random()*0.28).toFixed(2);
  const dur = 4 + Math.random()*6;
  h.style.animationDuration = dur + "s";
  h.style.animationDelay = (Math.random()*0.5) + "s";
  heartBg.appendChild(h);
  setTimeout(()=>h.remove(), (dur+1)*1000);
}
setInterval(spawnHeart, 180);

/* =========================
   YES/NO LOCK + STATUS
========================= */
const yesBtn = document.getElementById("yesBtn");
const noBtn  = document.getElementById("noBtn");
const statusText = document.getElementById("statusText");

function lockYesNo(){
  yesBtn.textContent = "LOCKED";
  noBtn.textContent  = "LOCKED";
  yesBtn.disabled = true; noBtn.disabled = true;
  yesBtn.classList.add("locked");
  noBtn.classList.add("locked");
}
function unlockYesNo(){
  yesBtn.textContent = "YES ðŸ’–";
  noBtn.textContent  = "NO ðŸ™ƒ";
  yesBtn.disabled = false; noBtn.disabled = false;
  yesBtn.classList.remove("locked");
  noBtn.classList.remove("locked");
}

yesBtn.addEventListener("click", ()=>{
  statusText.textContent = "Status: YES ðŸ’–";
});
noBtn.addEventListener("click", ()=>{
  statusText.textContent = "Status: NO ðŸ™ƒ";
});

lockYesNo();

/* =========================
   BOSS FIGHT (clean + minimal)
   - Move: WASD / Arrows / Drag
   - Shoot: Space / Tap
   Win unlocks buttons
========================= */
const bossCanvas   = document.getElementById("bossCanvas");
const bossStartBtn = document.getElementById("bossStart");
const bossOverlay  = document.getElementById("bossOverlay");
const bossMsg      = document.getElementById("bossMsg");
const playerHPBar  = document.getElementById("playerHPBar");
const bossHPBar    = document.getElementById("bossHPBar");
const loveBar      = document.getElementById("loveBar");
const lovePctText  = document.getElementById("lovePct");

const ctx = bossCanvas.getContext("2d");

let raf = null, running = false, lastT = 0;
const keys = new Set();

let pointerActive = false, pointerX = 0, pointerY = 0;

const player = { x:0,y:0,r:14, hp:100, hpMax:100, speed:280, inv:0 };
const boss   = { x:0,y:0,r:26, hp:100, hpMax:100, t:0, phase:1 };

const bullets = [];
const hazards = [];
const sparks  = [];

function clamp(v,a,b){ return Math.max(a, Math.min(b,v)); }
function dist(ax,ay,bx,by){ return Math.hypot(ax-bx, ay-by); }

function setBar(el, pct){ el.style.width = clamp(pct,0,100) + "%"; }

function resizeBossCanvas(){
  const r = bossCanvas.getBoundingClientRect();
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  bossCanvas.width = Math.floor(r.width * dpr);
  bossCanvas.height = Math.floor(r.height * dpr);
  ctx.setTransform(dpr,0,0,dpr,0,0); // draw in CSS px
  resetPositions();
}
window.addEventListener("resize", resizeBossCanvas, {passive:true});

function resetPositions(){
  const r = bossCanvas.getBoundingClientRect();
  player.x = r.width * 0.22;
  player.y = r.height * 0.55;
  boss.x   = r.width * 0.78;
  boss.y   = r.height * 0.45;
}

function spark(x,y,n=10){
  for(let i=0;i<n;i++){
    sparks.push({
      x,y,
      vx:(Math.random()*2-1)*140,
      vy:(Math.random()*2-1)*140,
      life:0.35 + Math.random()*0.25
    });
  }
}

let shootCd = 0;
function shoot(){
  const dx = boss.x - player.x;
  const dy = boss.y - player.y;
  const m = Math.hypot(dx,dy) || 1;
  bullets.push({
    x:player.x, y:player.y,
    vx:(dx/m)*520, vy:(dy/m)*520,
    r:5, dmg:9
  });
  spark(player.x, player.y, 6);
}

function bossFire(dt){
  boss.t += dt;
  const hpPct = boss.hp / boss.hpMax;
  boss.phase = hpPct > 0.65 ? 1 : hpPct > 0.30 ? 2 : 3;

  bossFire._cd = (bossFire._cd ?? 0) - dt;
  const rate = boss.phase===1 ? 0.95 : boss.phase===2 ? 0.70 : 0.45;
  if (bossFire._cd > 0) return;
  bossFire._cd = rate;

  const dx = player.x - boss.x;
  const dy = player.y - boss.y;
  const m = Math.hypot(dx,dy) || 1;

  const spread = boss.phase===1 ? 0.10 : boss.phase===2 ? 0.18 : 0.26;
  const ang = Math.atan2(dy,dx) + (Math.random()*2-1)*spread;
  const spd = boss.phase===1 ? 220 : boss.phase===2 ? 260 : 320;

  const big = (boss.phase===3 && Math.random()<0.25);
  hazards.push({
    x:boss.x, y:boss.y,
    vx:Math.cos(ang)*spd, vy:Math.sin(ang)*spd,
    r: big ? 14 : 10,
    dmg: big ? 20 : 12,
    wobble: boss.phase===3 ? (Math.random()*2-1)*10 : 0,
    t:0
  });

  if (boss.phase===3 && Math.random()<0.35){
    const n=8;
    for(let i=0;i<n;i++){
      const a = (i/n)*Math.PI*2;
      hazards.push({
        x:boss.x, y:boss.y,
        vx:Math.cos(a)*190, vy:Math.sin(a)*190,
        r:8, dmg:10, wobble:0, t:0
      });
    }
  }
}

function update(dt){
  const r = bossCanvas.getBoundingClientRect();

  // move
  let mx=0,my=0;
  if(keys.has("arrowleft")||keys.has("a")) mx -= 1;
  if(keys.has("arrowright")||keys.has("d")) mx += 1;
  if(keys.has("arrowup")||keys.has("w")) my -= 1;
  if(keys.has("arrowdown")||keys.has("s")) my += 1;

  if(pointerActive){
    const dx = pointerX - player.x;
    const dy = pointerY - player.y;
    const m = Math.hypot(dx,dy);
    if(m>6){ mx = dx/m; my = dy/m; } else { mx=0; my=0; }
  }

  const mag = Math.hypot(mx,my) || 1;
  mx/=mag; my/=mag;

  player.x += mx*player.speed*dt;
  player.y += my*player.speed*dt;

  player.x = clamp(player.x, player.r+6, r.width-player.r-6);
  player.y = clamp(player.y, player.r+6, r.height-player.r-6);

  // boss hover
  boss.y += Math.sin(boss.t*1.7)*18*dt;
  boss.x += Math.cos(boss.t*1.1)*10*dt;
  boss.x = clamp(boss.x, r.width*0.55, r.width-boss.r-10);
  boss.y = clamp(boss.y, boss.r+10, r.height-boss.r-10);

  shootCd = Math.max(0, shootCd - dt);
  bossFire(dt);

  // bullets
  for(let i=bullets.length-1;i>=0;i--){
    const b = bullets[i];
    b.x += b.vx*dt; b.y += b.vy*dt;
    if(b.x<-40||b.x>r.width+40||b.y<-40||b.y>r.height+40){
      bullets.splice(i,1); continue;
    }
    if(dist(b.x,b.y,boss.x,boss.y) < b.r + boss.r){
      boss.hp -= b.dmg;
      bullets.splice(i,1);
      spark(b.x,b.y,12);
      if(boss.hp<=0){ boss.hp=0; winBoss(); }
    }
  }

  // hazards
  for(let i=hazards.length-1;i>=0;i--){
    const h = hazards[i];
    h.t += dt;
    if(h.wobble){
      h.vx += Math.sin(h.t*10)*h.wobble*dt;
      h.vy += Math.cos(h.t*10)*h.wobble*dt;
    }
    h.x += h.vx*dt; h.y += h.vy*dt;

    if(h.x<-80||h.x>r.width+80||h.y<-80||h.y>r.height+80){
      hazards.splice(i,1); continue;
    }
    if(player.inv<=0 && dist(h.x,h.y,player.x,player.y) < h.r + player.r){
      player.hp -= h.dmg;
      player.inv = 0.7;
      hazards.splice(i,1);
      spark(player.x,player.y,18);
      if(player.hp<=0){ player.hp=0; loseBoss(); }
    }
  }

  // sparks
  for(let i=sparks.length-1;i>=0;i--){
    const p=sparks[i];
    p.life -= dt;
    p.x += p.vx*dt; p.y += p.vy*dt;
    p.vx *= (1-2.5*dt); p.vy *= (1-2.5*dt);
    if(p.life<=0) sparks.splice(i,1);
  }

  player.inv = Math.max(0, player.inv - dt);

  // ui
  setBar(playerHPBar, (player.hp/player.hpMax)*100);
  setBar(bossHPBar, (boss.hp/boss.hpMax)*100);
  const love = 100 - (boss.hp/boss.hpMax)*100;
  setBar(loveBar, love);
  lovePctText.textContent = Math.round(love) + "%";
}

function draw(){
  const r = bossCanvas.getBoundingClientRect();
  ctx.clearRect(0,0,r.width,r.height);

  // vignette
  const g = ctx.createRadialGradient(r.width/2,r.height/2,40,r.width/2,r.height/2,r.width*0.6);
  g.addColorStop(0,"rgba(255,255,255,0.0)");
  g.addColorStop(1,"rgba(15,23,42,0.10)");
  ctx.fillStyle=g;
  ctx.fillRect(0,0,r.width,r.height);

  // boss
  ctx.save();
  ctx.translate(boss.x,boss.y);
  ctx.beginPath();
  ctx.arc(0,0,boss.r,0,Math.PI*2);
  ctx.fillStyle="rgba(99,102,241,0.92)";
  ctx.fill();
  ctx.beginPath();
  ctx.arc(-8,-6,4,0,Math.PI*2);
  ctx.arc(8,-6,4,0,Math.PI*2);
  ctx.fillStyle="rgba(15,23,42,0.85)";
  ctx.fill();
  ctx.restore();

  // player
  ctx.save();
  ctx.translate(player.x,player.y);
  ctx.beginPath();
  ctx.arc(0,0,player.r,0,Math.PI*2);
  ctx.fillStyle = player.inv>0 ? "rgba(244,63,94,0.55)" : "rgba(244,63,94,0.90)";
  ctx.fill();
  ctx.restore();

  // bullets
  for(const b of bullets){
    ctx.beginPath();
    ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
    ctx.fillStyle="rgba(255,255,255,0.95)";
    ctx.fill();
  }

  // hazards
  for(const h of hazards){
    ctx.beginPath();
    ctx.arc(h.x,h.y,h.r,0,Math.PI*2);
    ctx.fillStyle="rgba(236,72,153,0.90)";
    ctx.fill();
  }

  // sparks
  for(const p of sparks){
    ctx.globalAlpha = clamp(p.life/0.6,0,1);
    ctx.fillStyle="rgba(255,255,255,0.9)";
    ctx.fillRect(p.x,p.y,2,2);
  }
  ctx.globalAlpha=1;
}

function loop(t){
  if(!running) return;
  const dt = Math.min(0.033, (t-lastT)/1000 || 0);
  lastT = t;
  update(dt);
  draw();
  raf = requestAnimationFrame(loop);
}

function startBoss(){
  bullets.length=0; hazards.length=0; sparks.length=0;
  player.hp=player.hpMax; player.inv=0;
  boss.hp=boss.hpMax; boss.t=0;
  bossMsg.textContent = "Fight! Dodge cursed hearts and shoot love beams ðŸ’˜";
  bossOverlay.classList.add("hidden");
  running=true;
  lastT=performance.now();
  raf=requestAnimationFrame(loop);
}

function stopBoss(){
  running=false;
  if(raf) cancelAnimationFrame(raf);
  raf=null;
}

function winBoss(){
  stopBoss();
  bossMsg.textContent = "YOU WON! Buttons unlocked ðŸ’–";
  unlockYesNo();
}

function loseBoss(){
  stopBoss();
  bossMsg.textContent = "You got heartbroken ðŸ˜­ Hit Start to try again.";
  bossOverlay.classList.remove("hidden");
  bossOverlay.querySelector(".big").textContent = "You Lost!";
  bossOverlay.querySelector(".small").innerHTML = "Hit Start to rematch.<br/>Move + Attack like before.";
}

/* controls */
window.addEventListener("keydown",(e)=>{
  const k = e.key.toLowerCase();
  if(["arrowleft","arrowright","arrowup","arrowdown"," "].includes(e.key)) e.preventDefault();
  keys.add(k);
  if(e.key === " " && running && shootCd<=0){
    shootCd=0.18;
    shoot();
  }
});
window.addEventListener("keyup",(e)=>keys.delete(e.key.toLowerCase()));

bossCanvas.addEventListener("pointerdown",(e)=>{
  pointerActive=true;
  const r=bossCanvas.getBoundingClientRect();
  pointerX=e.clientX-r.left; pointerY=e.clientY-r.top;
  if(running && shootCd<=0){ shootCd=0.18; shoot(); }
});
bossCanvas.addEventListener("pointermove",(e)=>{
  if(!pointerActive) return;
  const r=bossCanvas.getBoundingClientRect();
  pointerX=e.clientX-r.left; pointerY=e.clientY-r.top;
});
window.addEventListener("pointerup",()=>pointerActive=false);

bossStartBtn.addEventListener("click", startBoss);

/* init */
resizeBossCanvas();
resetPositions();
setBar(playerHPBar,100);
setBar(bossHPBar,100);
setBar(loveBar,0);
</script>
</body>
</html>

